[
  {
    "op": "core/column-addition",
    "description": "Create column isbnValid at index 3 based on column isbn using expression grel:if(or(row.index-row.record.fromRowIndex!=0,isBlank(cells[\"020 \"].value.match(/(.*)(\\$a)([^\\$]*)(.*)/)[2])),null,if(isNonBlank(cells[\"isbn\"].value),true,false))",
    "engineConfig": {
      "mode": "record-based",
      "facets": []
    },
    "newColumnName": "isbnValid",
    "columnInsertIndex": 3,
    "baseColumnName": "isbn",
    "expression": "grel:if(or(row.index-row.record.fromRowIndex!=0,isBlank(cells[\"020 \"].value.match(/(.*)(\\$a)([^\\$]*)(.*)/)[2])),null,if(isNonBlank(cells[\"isbn\"].value),true,false))",
    "onError": "set-to-blank"
  },
  {
    "op": "core/column-addition",
    "description": "Create column isbnOd1989 at index 15 based on column rok using expression grel:if(or(isBlank(cells[\"format\"].value.match(/.*(BOOKS).*/)[0]),cells[\"rok\"].value < 1989),null,if(and(isNonBlank(cells[\"format\"].value.match(/.*(BOOKS).*/)[0]),isNonBlank(cells[\"isbn\"].value)),true,false))",
    "engineConfig": {
      "mode": "record-based",
      "facets": []
    },
    "newColumnName": "isbnOd1989",
    "columnInsertIndex": 15,
    "baseColumnName": "rok",
    "expression": "grel:if(or(isBlank(cells[\"format\"].value.match(/.*(BOOKS).*/)[0]),cells[\"rok\"].value < 1989),null,if(and(isNonBlank(cells[\"format\"].value.match(/.*(BOOKS).*/)[0]),isNonBlank(cells[\"isbn\"].value)),true,false))",
    "onError": "set-to-blank"
  },  
  {
    "op": "core/column-addition",
    "description": "Create column title16plus at index 4 based on column title using expression grel:cells[\"title\"].value.length() >= 16",
    "engineConfig": {
      "mode": "record-based",
      "facets": []
    },
    "newColumnName": "title16plus",
    "columnInsertIndex": 4,
    "baseColumnName": "title",
    "expression": "grel:cells[\"title\"].value.length() >= 16",
    "onError": "set-to-blank"
  },
  {
    "op": "core/column-addition",
    "description": "Create column titleNum at index 4 based on column title using expression grel:if(and(isNonBlank(cells[\"format\"].value.match(/.*(BOOKS|PERIODICALS|ARTICLES).*/)[0]),isNonBlank(cells[\"title\"].value.match(/.+\\D+(\\d+)$/)[0])),true,null)",
    "engineConfig": {
      "mode": "record-based",
      "facets": []
    },
    "newColumnName": "titleNum",
    "columnInsertIndex": 4,
    "baseColumnName": "title",
    "expression": "grel:if(and(isNonBlank(cells[\"format\"].value.match(/.*(BOOKS|PERIODICALS|ARTICLES).*/)[0]),isNonBlank(cells[\"title\"].value.match(/.+\\D+(\\d+)$/)[0])),true,null)",
    "onError": "set-to-blank"
  }
]
